< Window x: Class = "MinecraftSpeedrunTracker.MainWindow"
        xmlns = "http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns: x = "http://schemas.microsoft.com/winfx/2006/xaml"
        Title = "Minecraft Bedrock Speedrun Stats" Height = "800" Width = "1400"
        Background = "#1E1E1E" WindowStartupLocation = "CenterScreen" >
    < Window.Resources >
        < Style TargetType = "TextBlock" >
            < Setter Property = "Foreground" Value = "White" />
            < Setter Property = "FontFamily" Value = "Segoe UI" />
        </ Style >
        < Style TargetType = "Border" x: Key = "StatCard" >
            < Setter Property = "Background" Value = "#2D2D30" />
            < Setter Property = "CornerRadius" Value = "8" />
            < Setter Property = "Padding" Value = "20" />
            < Setter Property = "Margin" Value = "5" />
        </ Style >
    </ Window.Resources >


    < Grid Margin = "20" >
        < Grid.RowDefinitions >
            < RowDefinition Height = "Auto" />
            < RowDefinition Height = "Auto" />
            < RowDefinition Height = "*" />
            < RowDefinition Height = "Auto" />
        </ Grid.RowDefinitions >

        < !--Header-- >
        < StackPanel Grid.Row = "0" Margin = "0,0,0,20" >
            < TextBlock Text = "Minecraft Bedrock Speedrun Statistics"
                       FontSize = "28" FontWeight = "Bold" Foreground = "#4EC9B0" />
            < TextBlock x: Name = "PathText" Text = "Loading..."
                       FontSize = "12" Foreground = "#808080" Margin = "0,5,0,0" />
        </ StackPanel >

        < !--Stats Cards-- >
        < Grid Grid.Row = "1" Margin = "0,0,0,20" >
            < Grid.ColumnDefinitions >
                < ColumnDefinition Width = "*" />
                < ColumnDefinition Width = "*" />
                < ColumnDefinition Width = "*" />
                < ColumnDefinition Width = "*" />
            </ Grid.ColumnDefinitions >

            < Border Grid.Column = "0" Style = "{StaticResource StatCard}" >
                < StackPanel >
                    < TextBlock Text = "Total Worlds" FontSize = "14" Foreground = "#808080" />
                    < TextBlock x: Name = "TotalWorldsText" Text = "0" FontSize = "36"
                               FontWeight = "Bold" Foreground = "#4EC9B0" Margin = "0,5,0,0" />
                </ StackPanel >
            </ Border >

            < Border Grid.Column = "1" Style = "{StaticResource StatCard}" >
                < StackPanel >
                    < TextBlock Text = "Worlds Played" FontSize = "14" Foreground = "#808080" />
                    < TextBlock x: Name = "WorldsPlayedText" Text = "0" FontSize = "36"
                               FontWeight = "Bold" Foreground = "#569CD6" Margin = "0,5,0,0" />
                </ StackPanel >
            </ Border >

            < Border Grid.Column = "2" Style = "{StaticResource StatCard}" >
                < StackPanel >
                    < TextBlock Text = "Quick Resets" FontSize = "14" Foreground = "#808080" />
                    < TextBlock x: Name = "WorldsAbandonedText" Text = "0" FontSize = "36"
                               FontWeight = "Bold" Foreground = "#CE9178" Margin = "0,5,0,0" />
                </ StackPanel >
            </ Border >

            < Border Grid.Column = "3" Style = "{StaticResource StatCard}" >
                < StackPanel >
                    < TextBlock Text = "Reset Ratio" FontSize = "14" Foreground = "#808080" />
                    < TextBlock x: Name = "ResetRatioText" Text = "0%" FontSize = "36"
                               FontWeight = "Bold" Foreground = "#D16969" Margin = "0,5,0,0" />
                </ StackPanel >
            </ Border >
        </ Grid >

        < !--Main Content-- >
        < Grid Grid.Row = "2" >
            < Grid.ColumnDefinitions >
                < ColumnDefinition Width = "2*" />
                < ColumnDefinition Width = "3*" />
            </ Grid.ColumnDefinitions >

            < !--Left Panel - Additional Stats-- >
            < Border Grid.Column = "0" Style = "{StaticResource StatCard}" Margin = "0,0,10,0" >
                < ScrollViewer VerticalScrollBarVisibility = "Auto" >
                    < StackPanel >
                        < TextBlock Text = "Performance Metrics" FontSize = "18"
                                   FontWeight = "Bold" Foreground = "#4EC9B0" Margin = "0,0,0,15" />


                        < TextBlock Text = "Average Playtime Per World" FontSize = "12" Foreground = "#808080" />
                        < TextBlock x: Name = "AvgPlaytimeText" Text = "0s" FontSize = "20"
                                   FontWeight = "SemiBold" Margin = "0,2,0,15" />

                        < TextBlock Text = "Average Time to First Activity" FontSize = "12" Foreground = "#808080" />
                        < TextBlock x: Name = "AvgFirstActivityText" Text = "0s" FontSize = "20"
                                   FontWeight = "SemiBold" Margin = "0,2,0,15" />

                        < TextBlock Text = "Total Storage Used" FontSize = "12" Foreground = "#808080" />
                        < TextBlock x: Name = "TotalStorageText" Text = "0 MB" FontSize = "20"
                                   FontWeight = "SemiBold" Margin = "0,2,0,15" />

                        < TextBlock Text = "Avg World Size" FontSize = "12" Foreground = "#808080" />
                        < TextBlock x: Name = "AvgWorldSizeText" Text = "0 MB" FontSize = "20"
                                   FontWeight = "SemiBold" Margin = "0,2,0,15" />

                        < Separator Background = "#404040" Margin = "0,10" />

                        < TextBlock Text = "Session Statistics" FontSize = "18"
                                   FontWeight = "Bold" Foreground = "#4EC9B0" Margin = "0,10,0,15" />

                        < TextBlock Text = "Today's Resets" FontSize = "12" Foreground = "#808080" />
                        < TextBlock x: Name = "TodayResetsText" Text = "0" FontSize = "20"
                                   FontWeight = "SemiBold" Margin = "0,2,0,15" />

                        < TextBlock Text = "This Week's Resets" FontSize = "12" Foreground = "#808080" />
                        < TextBlock x: Name = "WeekResetsText" Text = "0" FontSize = "20"
                                   FontWeight = "SemiBold" Margin = "0,2,0,15" />

                        < TextBlock Text = "Fastest Reset Time" FontSize = "12" Foreground = "#808080" />
                        < TextBlock x: Name = "FastestResetText" Text = "N/A" FontSize = "20"
                                   FontWeight = "SemiBold" Margin = "0,2,0,15" />

                        < TextBlock Text = "Longest Session" FontSize = "12" Foreground = "#808080" />
                        < TextBlock x: Name = "LongestSessionText" Text = "N/A" FontSize = "20"
                                   FontWeight = "SemiBold" Margin = "0,2,0,0" />
                    </ StackPanel >
                </ ScrollViewer >
            </ Border >

            < !--Right Panel - Worlds List-- >
            < Border Grid.Column = "1" Style = "{StaticResource StatCard}" Margin = "10,0,0,0" >
                < DockPanel >
                    < TextBlock DockPanel.Dock = "Top" Text = "Recent Worlds" FontSize = "18"
                               FontWeight = "Bold" Foreground = "#4EC9B0" Margin = "0,0,0,15" />


                    < DataGrid x: Name = "WorldsDataGrid"
                              AutoGenerateColumns = "False"
                              Background = "#252526"
                              RowBackground = "#2D2D30"
                              AlternatingRowBackground = "#3E3E42"
                              GridLinesVisibility = "None"
                              HeadersVisibility = "Column"
                              BorderThickness = "0"
                              CanUserAddRows = "False"
                              IsReadOnly = "True" >
                        < DataGrid.Resources >
                            < Style TargetType = "DataGridColumnHeader" >
                                < Setter Property = "Background" Value = "#3E3E42" />
                                < Setter Property = "Foreground" Value = "White" />
                                < Setter Property = "FontWeight" Value = "Bold" />
                                < Setter Property = "Padding" Value = "10,8" />
                                < Setter Property = "BorderThickness" Value = "0" />
                            </ Style >
                            < Style TargetType = "DataGridCell" >
                                < Setter Property = "BorderThickness" Value = "0" />
                                < Setter Property = "Foreground" Value = "White" />
                                < Setter Property = "Padding" Value = "10,5" />
                            </ Style >
                        </ DataGrid.Resources >
                        < DataGrid.Columns >
                            < DataGridTextColumn Header = "World Name" Binding = "{Binding WorldName}" Width = "*" />
                            < DataGridTextColumn Header = "Created" Binding = "{Binding CreatedDisplay}" Width = "130" />
                            < DataGridTextColumn Header = "Status" Binding = "{Binding StatusDisplay}" Width = "90" >
                                < DataGridTextColumn.ElementStyle >
                                    < Style TargetType = "TextBlock" >
                                        < Setter Property = "FontWeight" Value = "Bold" />
                                        < Style.Triggers >
                                            < Trigger Property = "Text" Value = "PLAYED" >
                                                < Setter Property = "Foreground" Value = "#4EC9B0" />
                                            </ Trigger >
                                            < Trigger Property = "Text" Value = "RESET" >
                                                < Setter Property = "Foreground" Value = "#D16969" />
                                            </ Trigger >
                                        </ Style.Triggers >
                                    </ Style >
                                </ DataGridTextColumn.ElementStyle >
                            </ DataGridTextColumn >
                            < DataGridTextColumn Header = "Playtime" Binding = "{Binding PlaytimeDisplay}" Width = "90" />
                            < DataGridTextColumn Header = "Size" Binding = "{Binding SizeDisplay}" Width = "80" />
                        </ DataGrid.Columns >
                    </ DataGrid >
                </ DockPanel >
            </ Border >
        </ Grid >

        < !--Bottom Buttons-- >
        < StackPanel Grid.Row = "3" Orientation = "Horizontal" HorizontalAlignment = "Right" Margin = "0,20,0,0" >
            < Button x: Name = "RefreshButton" Content = "Refresh" Width = "100" Height = "35"
                    Background = "#0E639C" Foreground = "White" BorderThickness = "0"
                    FontWeight = "SemiBold" Margin = "0,0,10,0" Click = "RefreshButton_Click" Cursor = "Hand" />
            < Button x: Name = "ExportButton" Content = "Export CSV" Width = "100" Height = "35"
                    Background = "#2D2D30" Foreground = "White" BorderThickness = "0"
                    FontWeight = "SemiBold" Margin = "0,0,10,0" Click = "ExportButton_Click" Cursor = "Hand" />
            < Button x: Name = "OpenLogButton" Content = "Open Log" Width = "100" Height = "35"
                    Background = "#2D2D30" Foreground = "White" BorderThickness = "0"
                    FontWeight = "SemiBold" Click = "OpenLogButton_Click" Cursor = "Hand" />
        </ StackPanel >
    </ Grid >
</ Window >
